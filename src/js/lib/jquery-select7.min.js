(function(){var t,e=[].slice;t=function($){"use strict";var t,s,n,i;return i=function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")},s=function(t){var e,s,n,l;return(e=$(t).attr("placeholder"))&&$(t).find("option:first").prop("disabled",!0).attr("data-is-placeholder",!0).text(e),n=function(t){var e,s;return s=$(t).data(),s.title=i($(t).text()),s.value=$(t).attr("value")||i($(t).text()),$(t).attr("disabled")&&(s.disabled=!0),(e=$(t).attr("class"))&&(s.class=e),s},s=function(t){var e,s;return s=$(t).data(),s.isOptgroup=!0,s.title=i($(t).attr("label")),(e=$(t).attr("class"))&&(s.class=e),s.options=l(t),s},(l=function(t){var e,i,l,o,r;for(o=$(t).find("> option, > optgroup"),r=[],i=0,l=o.length;i<l;i++)e=o[i],$(e).is("option")?r.push(n(e)):r.push(s(e));return r})(t)},n=function(t,e){var s,n,i,l,o,r,c,a;for(i=$(t).val(),l=0,r=e.length;l<r;l++)if(s=e[l],s.isOptgroup){for(a=s.options,o=0,c=a.length;o<c;o++)if(n=a[o],n.value===i)return n}else if(s.value===i)return s;return e.length>0&&e[0].isPlaceholder?e[0]:null},t=function(){function t(t,s){var n,i,l,o;this.el=t,this.$el=$(this.el),this.$select7=null,this.$drop=null,this.config=$.extend({},this.defaults,s),this.$el.is(".select7_native_dropdown")&&(this.config.nativeDropdown=!0),this.$el.is(".select7_readonly")&&(this.config.readonly=!0),this.$el.is(".select7_remove_current")&&(this.config.removeCurrent=!0),this.$el.is(".select7_collapse_optgroups")&&(this.config.collapseOptgroups=!0),o=this.$el.data(),l=o.templateOptionFnName,i=o.templateOptgroupFnName,n=o.templateCurrentFnName,l&&(this.config.optionTemplate=function(){var t,s;return t=1<=arguments.length?e.call(arguments,0):[],(s=window[l]).call.apply(s,[this].concat(e.call(t)))}),i&&(this.config.optgroupTemplate=function(){var t,s;return t=1<=arguments.length?e.call(arguments,0):[],(s=window[i]).call.apply(s,[this].concat(e.call(t)))}),n&&(this.config.currentTemplate=function(){var t,s;return t=1<=arguments.length?e.call(arguments,0):[],(s=window[n]).call.apply(s,[this].concat(e.call(t)))}),this.updateItemsAndSelected(),this.opened=!1,this.pwnSelect()}return t.prototype.defaults={nativeDropdown:!1,readonly:!1},t.prototype.updateItemsAndSelected=function(){return this.items=s(this.el),this.selected=n(this.el,this.items)},t.prototype.pwnSelect=function(){var t,e,s,n,i;if(this.config.nativeDropdown||this.$el.hide(),t=this.$el.attr("class").split(" "),t.splice(t.indexOf("select7"),1),s='<div class="select7 '+t.join(" ")+'">\n\t<div class="select7__current">\n\t\t<span data-role="value" class="select7__current-value" data-value=""></span><span class="select7__caret"></span>\n\t</div>\n</div>',this.$select7=$(s),this.$el.data("updateCurrentFn",function(t){return function(){return t.updateCurrent()}}(this)),this.$el.on("change",this.$el.data("updateCurrentFn")),this.updateCurrent(),this.config.nativeDropdown||this.$select7.find(".select7__current").click(function(t){return function(){return t.toggle()}}(this)),this.$el.after(this.$select7),this.config.nativeDropdown)return this.$el.css({position:"absolute",transformOrigin:"top left",zIndex:1,opacity:0,margin:0,padding:0}),n=function(t,e){return parseFloat(t.css(e).replace("px",""))},i=function(t){return n(t,"width")+n(t,"padding-left")+n(t,"padding-right")+n(t,"border-left-width")+n(t,"border-right-width")},e=function(t){return n(t,"height")+n(t,"padding-top")+n(t,"padding-bottom")+n(t,"border-top-width")+n(t,"border-bottom-width")},this.$el.css({transform:"scaleX("+i(this.$select7)/i(this.$el)+") scaleY("+e(this.$select7)/e(this.$el)+")"})},t.prototype.updateCurrent=function(){var t;return this.updateItemsAndSelected(),t=this.$select7.find("[data-role='value']"),null===this.selected&&(this.selected={isPlaceholder:!0,title:"-"}),t.attr("data-value",this.selected.isPlaceholder?"":this.selected.value),t.toggleClass("select7__placeholder",!!this.selected.isPlaceholder),this.config.currentTemplate?t.html(this.config.currentTemplate.call(this,this.selected,this.items)):(t.text(this.selected.title),t.find(".select7__icon").remove(),this.selected.icon?t.prepend('<span class="select7__icon"><img src="'+this.selected.icon+'"></span>'):void 0)},t.prototype.open=function(){var t,e,n,i,l,o,r,c;if(!this.opened&&(this.items=s(this.el),0!==this.items.length)){for(this.$drop=$('<ul class="select7__drop"></ul>'),this.$drop=$('<div class="select7__drop"></div>'),t=$('<ul class="select7__drop-list"></ul>'),this.$drop.append(t),n=function(t){return function(e){var s;return s=$('<li class="select7__option '+(e.class||"")+'"></li>'),t.config.optionTemplate?s.html(t.config.optionTemplate.call(t,e,t.items)):s.text(e.title),e.disabled&&s.addClass("select7__option_disabled"),e===t.selected&&s.addClass("select7__option_current"),e.icon&&s.prepend('<span class="select7__icon"><img src="'+e.icon+'"></span>'),s.data("option",e),s}}(this),e=function(t){return function(e){var s,i,o,r,c,a,p,d;if(i=$('<li class="select7__optgroup '+(e.class||"")+'"></li>'),t.config.collapseOptgroups&&i.addClass("select7__optgroup_collapse"),r=!1,s=$('<span class="select7__optgroup-label"></span>'),t.config.optgroupTemplate?s.html(t.config.optgroupTemplate.call(t,e,t.items)):s.text(e.title),i.append(s),l.options){for(o=$('<ul class="select7__optgroup-items"></ul>'),d=l.options,a=0,p=d.length;a<p;a++)c=d[a],c===t.selected&&(r=!0),t.config.removeCurrent&&c===t.selected||o.append(n(c));i.append(o)}return t.config.collapseOptgroups&&r&&i.addClass("select7__optgroup_collapse_open"),i}}(this),c=this.items,i=o=0,r=c.length;o<r;i=++o)l=c[i],l.isPlaceholder||this.config.removeCurrent&&l===this.selected||t.append(l.isOptgroup?e(l):n(l));return this.$drop.on("click",".select7__option",function(t){return function(e){var s,n;if(!t.config.readonly){if(s=$(e.currentTarget),n=s.data("option"),n.disabled)return;if(n.href)return void(window.location.href=n.href);t.$el.val(n.value).trigger("change")}return t.close()}}(this)),this.$drop.on("click",".select7__optgroup_collapse",function(t){return function(t){var e;return e=$(t.currentTarget),e.toggleClass("select7__optgroup_collapse_open")}}(this)),this.$select7.append(this.$drop),this.$select7.addClass("select7_open"),this.opened=!0,$("body").trigger("select7Opened"),setTimeout(function(t){return function(){return t.$drop.click(function(t){return t.stopPropagation()}),t.$drop.data("closeFn",function(){return t.close()}),$("body").on("click select7Opened",t.$drop.data("closeFn"))}}(this),1)}},t.prototype.close=function(){if(this.opened)return this.$select7.removeClass("select7_open"),$("body").off("click select7Opened",this.$drop.data("closeFn")),this.$drop.remove(),this.$drop=null,this.opened=!1},t.prototype.toggle=function(){return this.opened?this.close():this.open()},t.prototype.destroy=function(){return this.opened&&close(),this.$select7.remove(),this.$el.off("change",this.$el.data("updateCurrentFn")),this.$el.data("updateCurrentFn",null),this.$el.data("select7",null),this.$el.show()},t}(),$.fn.select7=function(){var s,n;return n=arguments[0],s=2<=arguments.length?e.call(arguments,1):[],this.each(function(){var e;if(e=$(this).data("select7"),e||(e=new t(this,"object"==typeof n?option:{}),$(this).data("select7",e)),"string"==typeof n)return e[n].apply(e,s)})}},"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}).call(this);